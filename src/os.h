#ifndef OS_H
#define OS_H

#include <unordered_map>
#include "global_types.h"


typedef struct OS                OS;

using namespace std; 


//////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////


struct OS {
  std::unordered_map<uns64, uns64> pt;
  Flag      *ipt;
  uns               lines_in_page;
  uns               num_threads;
  uns64             num_pages;
  uns64             s_miss_count;
};



///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////

OS*     os_new(uns num_pages, uns num_threads);
uns64   os_vpn_to_pfn(OS *os, uns vpn, uns tid);
void    os_print_stats(OS *os);

uns64   os_get_victim_from_ipt(OS *os);
Addr    os_v2p_lineaddr(OS *os, Addr lineaddr, uns tid);

//////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////

#endif // OS_H
